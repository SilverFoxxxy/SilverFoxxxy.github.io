<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

       ym(91949579, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
       });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/91949579" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    <meta charset="UTF-8">
    <title id="page_title">GraphEditor </title>

    <!-- <link rel="stylesheet" href="vkmap.css"> -->
    <style>
        html, body, #map {
            width: 100%; height: 100%; padding: 0; margin: 0;
        }
    </style>
    <link rel="stylesheet" href="graph.css">
    
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, maximum-scale=1" /> 
</head>
<body>
<div class="body_block" style="width: 100%">
    <center><div class="theme_button_wrapper">
            <h2>Graph Editor</h2>
                <button class="theme_button" onclick="setTheme(event, 'gray')" id="gray_theme_button"><div class="button_cross">&#215;</div></button>
                <button class="theme_button" onclick="setTheme(event, 'violet')" id="violet_theme_button"><div class="button_cross">&#215;</div></button>
                <button class="theme_button" onclick="setTheme(event, 'red')" id="red_theme_button"><div class="button_cross">&#215;</div></button>
            </div>
        </center>
    <!-- <center>
    <h1>Graph Editor</h1>
    </center> -->
    <br>
    <div class="wrapper" style="margin: auto;">
        <!--  -->

        <div class="main_block" style="width: auto;">
            
            <center>
                <canvas id="graph_view" width="500" height="500" style="border: 1px solid black"></canvas>
            </center>
            <br>
            <div id="progress_block" style="width:100%">
                    <!-- <div id="percents" style="text-align: center; font-size: 3rem;"></div> -->
                    <div id="progress_bar" style="width: 100%; height: 0.35rem; position: relative;">
                        <div id="white_bar" style="width: 0%; height: 100%;"></div>
                        <!-- <div id="bar_num" style="position: absolute; width: 100%; height: 100%; text-align: center; font-size: 1rem;">0%</div> -->
                </div>
            </div>
            <br>
        </div>

        <div class="main_block" style="width: 5rem; height: 2rem;"></div>

        <div class="main_block" id="input_block">
            <div class="tab">
                <div class="tab_button_wrapper">
                    <button id="init_tab_button" class="tablinks" onclick="openTab(event, 'Input')">INPUT</button>
                    <button class="tablinks" onclick="openTab(event, 'Random')">RANDOM</button>
                    <button class="tablinks" onclick="openTab(event, 'Print')">PRINT</button>
                </div>
            </div>

            <!-- Tab content -->
            <div id="Input" class="tabcontent">
              <center><h3>Input Graph</h3></center>
                n = <input type="text" id="input_n">
                <br><br>
                edges:
                <br>
                <div class="copy_div">
                    <textarea id="input_graph" name="input_g" cols="20" rows="7">
                    </textarea>
                    <button class="copy_button" onclick="copy_to_clipboard('input_graph')"><div class="tooltip">copied!</div>copy</button>
                </div>
                <br>
                <button id="render_bttn" onclick="render_view()">render</button>
                <br><br>
                <button id="pause_bttn" onclick="pause_view()">stop</button>
                <br><br>
            </div>

            <div id="Random" class="tabcontent">
              <center><h3>Random Graph</h3></center>
                n = <input type="text" id="input_rand_n">
                <br><br>
                p = <input type="text" id="input_rand_p" placeholder="0.15">
                <br>
                <div style="color:gray;">&emsp;&emsp;edge probability</div>
                <br><br>
                <button id="render_random_bttn" onclick="render_random_view()">render</button>
                <br><br>
                <button id="pause_bttn1" onclick="pause_view()">stop</button>
                <br><br>
                <center>INPUT / PRINT to copy</center>
                <br>
            </div>

            <div id="Print" class="tabcontent">
                <center><h3>Print Current Graph</h3></center>
                <button id="print_random_bttn" onclick="print_random_view()">print</button>
                <br><br>
                <div class="copy_div">
                    <pre id="random_graph"></pre>
                    <button class="copy_button" onclick="copy_to_clipboard('random_graph')"><div class="tooltip">copied!</div>copy</button>
                </div>
                <br>
            </div>

            <br>

            <!-- <center><div class="tab_button_wrapper">
                <button class="theme_button" onclick="setTheme('gray')" id="gray_theme_button">-</button>
                <button class="theme_button" onclick="setTheme('violet')" id="violet_theme_button">-</button>
                <button class="theme_button" onclick="setTheme('red')" id="red_theme_button">-</button>
            </div></center> -->
            <button id="download_button" onclick="load_pic()">&#10515; graph.png</button>
        </div>

    </div>
    <a id="link" style="position:absolute; left:-9999px;">download</a>

    <div id="problems"></div>
    
    <br>
    <br>
    <br>
    <br>
    <br><br><br>
    <br><br><br>
    <br><br><br>

    <script src="canvas.js" type="text/javascript"></script>
</div>
</body>
<script type="text/javascript">
    function load_pic() {
        var canvas = document.getElementById("graph_view");
        var link = document.getElementById('link');
        link.setAttribute('download', 'graph.png');
        link.setAttribute('href', canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"));
        link.click();
    }
</script>
</html>