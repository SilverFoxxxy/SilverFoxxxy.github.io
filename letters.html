<html>
<head>  

  <meta charset="UTF-8">
<!-- The Head tag is used to create a title of web page, CSS syntax for a web page, and helps in written a JavaScript code. -->  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <script src="https://vk.com/js/api/openapi.js?169" type="text/javascript"></script>

  <!-- <div style="font-size: calc(var(--def-fontsz) * 0.5)"> Letters reader </div> -->

<title id="page_title">Letters reader </title>
<link rel="stylesheet" type="text/css" href="letters_reader.css">
<link rel="icon" href="src/icons/icon.png" type="image/icon type">

</head>
<body>


<script src="src/letters_tabs.js"></script>
<script src="src/http_req.js"></script>
  <!-- style="height:700px;" -->




















<div class="wideline">
<center>
    <div class="block" style="background: var(--main-bg); outline: none;">
    <table>
      <tr>
        <td style="width: fit-content">
          <button type="button" style="font-size: var(--def-fontsz); width: calc(var(--button-width) * 1); height:calc(var(--button-width) * 0.7);" id="login_button" onclick="showLoginForm()">
            <svg width="100%" height="100%">
              <svg id="login_icon" width="100%" height="100%" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
               <g fill="none" style="stroke: var(--main-color)">
                <path d="m5 95c0-22.427 18.838-38.136 45-38.127 26.162 0.0093 45 15.7 45 38.127" stroke-width="7"/>
                <circle cx="50" cy="27.5" r="22.5" stroke-width="7"/>
               </g>
              </svg>
              <!-- <use xlink:href="src/icons/login.svg#login_icon"></use> -->
            </svg>
            <!-- <img src="src/icons/login.svg" style='height: 100%; object-fit: contain;' id="login_icon"/>  -->
              
            </button>
        </td>

        <td style="width: fit-content; min-width: calc(var(--button-width) * 1);">
          <a href="letters_bookmarks.html">
            <div style="font-size: var(--def-fontsz); width:fit-content; height:calc(var(--button-width) * 0.7); min-width: calc(var(--button-width) * 1);" >
              <svg width="100%" height="100%">
                <svg width="100%" height="100%" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                 <path d="m24.06 5.3046v77.296l25.94-24.06 25.94 24.06v-77.296" fill="none" stroke="var(--main-color)" stroke-width="7"/>
                </svg>
                <!-- <use xlink:href="src/icons/login.svg#login_icon"></use> -->
              </svg>
              <!-- <img src="src/icons/bookmark.png" style='height: 100%; object-fit: contain;' id="favs_icon"/> -->
            </div>
          </a>
        </td>

        <td style="width:100%; float: center;">
          <center>
            <a href="letters.html" style="font-size: var(--def-fontsz);">На главную</a>
          </center>
        </td>

        <td style="width: fit-content">
          <button type="button" style="font-size: var(--def-fontsz); width:fit-content; height:calc(var(--button-width) * 0.7); min-width: calc(var(--button-width) * 1);" id="color_theme_button"> <img src="src/sun_moon2.jpg" style='height: 100%; object-fit: contain;' id="theme_icon"/> </button>
        </td>

        <td style="width: fit-content;">
          <button type="button" style="font-size: var(--def-fontsz); width:fit-content; height:calc(var(--button-width) * 0.7); min-width: calc(var(--button-width) * 1);" id="view_theme_button"> <img src="src/icons/default_dark.png" style='height: 100%; object-fit: contain; margin: auto;' id="view_icon"/> </button>
        </td>
      </tr>
    </table>
    <div id="username" style="display: none; text-align:left; padding-left: 0.5em; font-size: calc(var(--def-fontsz) * 0.85); color: var(--from-color);">
        silverfox123546576
    </div>
  </div>

  <div class="block" id="login_block" style="display:none; font-size:calc(var(--def-fontsz) * 0.5);">
    <br>
    <center>
      <div style="width: 92%;">
      <table>
        <tr>
          <td style="width: 30%; font-size:calc(var(--def-fontsz) * 0.7);">
            <center>
            Логин / почта:
            </center>
          </td>

          <td style="width: 5%;"></td>

          <td style="width: 30%; font-size:calc(var(--def-fontsz) * 0.7);">
            <center>
            Пароль:
          </center>
          </td>

          <td style="width: 5%;"></td>

          <td style="width: 30%; font-size: 0.7em;">
          </td>
        </tr>
        <tr>
          <td>
            <input type="text" autocomplete="username" class="input_text" name="user_nm" id="user_nm" style="font-size:calc(var(--def-fontsz) * 0.7); width: 100%;">
          </td>

          <td></td>

          <td style="font-size: 0.7em;">
            <input type="password" autocomplete="current-password" class="input_text" name="user_passwd" id="user_pswd" style="font-size:calc(var(--def-fontsz) * 0.7);  width: 100%;">
          </td>

          <td></td>

          <td style="font-size: 0.7em;">
            <button type="button" style="font-size:calc(var(--def-fontsz) * 0.9); width:100%;" id="login_button" onclick="tryLogin()"> Войти </button>
          </td>
        </tr>
      </table>
      <br>
      <div style="font-size:calc(var(--def-fontsz) * 0.7); width:fit-content; min-width: calc(var(--button-width) * 1);">
        Если ваш аккаунт привязан к ВК:
        <!-- VK Widget -->
        <div id="vk_auth"></div>
      </div>
      <br>
      <div style="font-size:calc(var(--def-fontsz) * 0.7); width:fit-content; min-width: calc(var(--button-width) * 1);">
        или
        <a href="registration.html" target="_blank" style="font-size:calc(var(--def-fontsz) * 0.7); width:fit-content; min-width: calc(var(--button-width) * 1);">зарегистрироваться</a>
      </div>
      <div id="login_errors" style="font-size:calc(var(--def-fontsz) * 0.7);"></div>
      </div>
      <br>
    </center>
  </div>

  <div class="block" id="logged_in_block" style="display:none; font-size:calc(var(--def-fontsz) * 0.7);">
    <center>
      <br>
      <button type="button" style="font-size:calc(var(--def-fontsz) * 0.9); width:9em;" id="logout_button" onclick="tryLogout()"> Выйти </button><br><br>
      Войдите через ВК, чтобы привязать аккаунт:
      <div id="vk_auth2"></div>
      <br>
    </center>
  </div>
</center>
</div>





























  <!-- <div style="font-size: 0.5em;">
    <br>
  </div> -->
  <!-- <div id="header" style="height: fit-content; width: 95%; max-width: var(--block-width);">
    <table style="width: fit-content; height: fit-content; float: center;">
    <tr>
      <td style="width: fit-content">
        <button type="button" style="font-size: var(--def-fontsz); width:fit-content; height:var(--bbutton-h); min-width: calc(var(--button-width) * 1.1);" id="view_theme_button"> <img src="src/icons/default_dark.png" style='height: 100%; object-fit: contain' id="view_icon"/> </button>
      </td>
      <td style="width: var(--def-fontsz);">
      </td>
      <td style="width: fit-content; float: center;">
          <div id="title" style="width: fit-content; font-size: var(--button-h);"><div style="font-size: var(--button-h);">
            <div style="font-size: 0.8em">Letters reader</div></div></div>
      </td>
      <td style="width: var(--def-fontsz);">
      </td>
      <td style="width: fit-content">
        <button type="button" style="font-size: var(--def-fontsz); width:fit-content; height:var(--bbutton-h); min-width: calc(var(--button-width) * 1.1);" id="color_theme_button"> <img src="src/sun_moon2.jpg" style='height: 100%; object-fit: contain' id="theme_icon"/> </button>
      </td>
    </tr>
  </table>
  </div> -->
<center>
  <div style="font-size: calc(var(--def-fontsz) * 2.25);">Letters reader</div>
  <div style="font-size: 0.5em;">
    <!-- <br> -->
  </div>
</center>

<!-- The Body tag is used to display the content on a web page. In this example we do not specify any content or any tag, so in output nothing will display on the web page. -->
<center>
  <div style="width: 95%; max-width: var(--block-width); margin: auto;">
  <table>
  <tr><td>
    <div style="width: 65%; float: right;font-size: var(--def-fontsz);">
      <div style="font-size: 0.65em">
        «По-моему, достаточно собрать письма людей (слегка коснуться их опытной, осторожной и разумной рукой редактора) и опубликовать их — и получится новая литература мирового значения. Литература, конечно, выходит из наблюдения людей. Но где больше их можно наблюдать, как не в их письмах»
      </div>
      <div style="float:right; font-size: var(--def-fontsz);">
        <div style="font-size: 0.65em">
        — Андрей Платонов
        </div>
      </div>
    </div>
    </td></tr>
  </table>
</div>
</center>

<div class="wideline">

<center>
<div class="block scrollable">

  <!-- <div class="tab">
    sdfglhfdfghjkjhgkfjdghj.kl'j;lhkgfxbcnvmb,jcnxbcnvmbn,mvncbxnjjhgfhghjlxcnvbjhgfjdhsfcgv jhvhcgcmnbvhjcj
  </div> -->

  <div class="tab" id="tabs_top">
    <button class="tablinks" id="main_tab_button" onclick="openTab(event, 'main_tab')">Все</button>
    <button class="tablinks" id="favs_tab_button" onclick="openTab(event, 'favs_tab')">Избранное</button>
    <button class="tablinks" id="edit_tab_button" onclick="openTab(event, 'edit_tab')">Мои произведения</button>
  </div>

  <div id="main_tab" class="tabcontent">

  <table style="font-size: calc(var(--def-fontsz) * 0.7)";>
    <tr><td>
      <br><br><br>
    </td></tr>
  </table>


  </div>

  <div id="favs_tab" class="tabcontent">
    <div id="favs_pretab" style="display:block;">
      <table>
        <tr><td>
          <div style="font-size: 0.5em">
            <br><br><br>
          </div>
        </td></tr>

        <tr><td>
          <div class="link_block link_msg_v1">
            <div class="link_msg link_msg_v2">
              <div style="text-decoration: none;">
                <big>Здесь будут ваши избранные истории<br></big><hr>
                <div style="font-style: italic;">Чтобы сохранять любимые произведения нужно авторизоваться</div>
              </div>
            </div>
          </div>
        </td></tr>

        <tr><td>
          <div style="font-size: 0.5em">
            <br><br><br>
          </div>
        </td></tr>
        <tr><td>
          <br><br><br>
        </td></tr>
      </table>
    </div>
    <div id="favs_table">
    </div>
  </div>

  <div id="edit_tab" class="tabcontent">
    <div id="edit_pretab">
      <table>

        <tr><td>
          <div style="font-size: 0.5em">
            <br><br><br>
          </div>
        </td></tr>

        <tr><td>
          
          <div class="link_block link_msg_v1">
            <div class="link_msg link_msg_v2">
              <hr>
              <div style="text-decoration: none;">
                Добавить свою историю / произведение на сайт<br>
                можно на этой страничке:
                <a href="add_story.html" target="_blank" style="font-size: var(--small-fontsz);">add_story</a>
              </div>
              <hr>
            </div>
          </div>

        </td></tr>
      </table>
    </div>

    <div id="edit_table">
      <!-- <table>
        <tr><td>
          <div style="font-size: 0.5em">
            <br><br><br>
          </div>
        </td></tr>

        <tr><td>
          <div class="link_block link_msg_v1">
            <div class="link_msg link_msg_v2">
              <div style="text-decoration: none;">
                <big>Здесь будут добавленные вами истории</big>
              </div>
            </div>
          </div>
        </td></tr>

        <tr><td>
          <div style="font-size: 0.5em">
            <br><br><br>
          </div>
        </td></tr>
        <tr><td>
          <br><br><br>
        </td></tr>
      </table> -->
    </div>
  </div>

</div>
</center>
</div>

<br><br>

<div class="wideline">
<center>
<div class="block scrollable" style="min-height: auto;">
  <table>
    <tr><td>
      <br>
    </td></tr>

    <tr><td>
      <div class="left_block">
        <div class="left_msg" style="white-space: normal;">
          <div style="font-size: var(--small-fontsz); text-align: left; width: fit-content; width: -moz-fit-content;">
            Группа вк:<br>
            <a href="https://vk.com/letters_reader" target="_blank" style="font-size: var(--small-fontsz);">vk.com/letters_reader</a>
            <br>
            <!-- 
            ---
            <br>
            <div style="font-size: var(--small-fontsz);">
              Вопросы и предложения писать в группу вк
            </div>
            ---
            <br>
            Похожее:
            <div>
              <a href="https://bash.im/byrating" target="_blank">Bash.im</a> - цитатник рунета
              <br>
              <a href="http://www.bash.org/" target="_blank">bash.org</a>
            </div> -->
          </div>
        </div>
      </div>
    </td></tr>

    <tr><td>
      <br>
    </td></tr>

    <tr><td>
      <div class="right_block">
        <div class="right_msg" style="white-space: normal;">
          <div style="font-size: var(--small-fontsz); text-align: left; width: fit-content; width: -moz-fit-content;">
            <!-- Информация про развитие сайта:<br>
            <a href="https://obvious-broker-611.notion.site/Letters-Reader-b3a9b8c2b63f49398f3995ff0016622a" target="_blank" style="font-size: var(--small-fontsz);">site_info</a>
            <br>---
            <br>
            Информация для авторов и редакторов, в том числе про текстовый формат, в котором можно выкладывать истории:<br>
            <a href="https://obvious-broker-611.notion.site/457dab4386014237a0c30078b9fb29d3" target="_blank" style="font-size: var(--small-fontsz);">_docs_</a>
            <br>
            ---
            <br>
            Редактор ваших историй<br>(здесь можно посмотреть, как ваша история может выглядеть на сайте)<br>
            <a href="text_to_json.html" target="_blank" style="font-size: var(--small-fontsz);">Редактор текстов</a> -->
            Добавить свою историю / произведение на сайт<br>
            <a href="add_story.html" target="_blank" style="font-size: var(--small-fontsz);">add_story</a>
          </div>
        </div>
      </div>
    </td></tr>

    <tr><td>
      <br>
    </td></tr>

  </table>
</div>
</center>
</div>

<br>
<!-- <center>
  <div style="font-size: var(--small-fontsz); text-align: left; width: fit-content; width: -moz-fit-content;">
Информация про развитие сайта:
    <a href="https://obvious-broker-611.notion.site/Letters-Reader-b3a9b8c2b63f49398f3995ff0016622a" target="_blank" style="font-size: var(--small-fontsz);">site_info</a>
    <br>---
    <br>
    Информация для авторов и редакторов:
    <a href="https://obvious-broker-611.notion.site/457dab4386014237a0c30078b9fb29d3" target="_blank" style="font-size: var(--small-fontsz);">_docs_</a>
    <br>
    ---
    <br>
    Редактор ваших историй<br>(страничка с удобным текстовым редактором)<br>
    <a href="https://silverfoxxxy.github.io/text_to_json" target="_blank" style="font-size: var(--small-fontsz);">Редактор текстов</a>
    <br>---
    <br>
    <div style="font-size: var(--small-fontsz);">
      Вопросы и предложения писать сюда:
      ivan-belkov2@ya.ru
    </div>
    ---
    <br>
    Похожее:
    <div>
      <a href="https://bash.im/byrating" target="_blank">Bash.im</a> - цитатник рунета
      <br>
      <a href="http://www.bash.org/" target="_blank">bash.org</a>
    </div>
  </div>
</center> -->
<br><br><br>

<!-- <script type="text/javascript" src="letters_example.json"></script> -->

<script>
  var button = document.getElementById("main_tab_button");
  button.click();
  // openTab(event, 'main_tab');
</script>

<script>
  window.color_theme = 1;
  window.view_theme = 1;
</script>
<script src="src/letters_login.js"></script>
<script src="src/letters_themes.js">
</script>
<script src="src/letters_views.js">
</script>
<script src="src/letters_story_card.js">
</script>
<script src="src/letters_main_page.js">
</script>

<script src="src/show_tab.js">
</script>

<script>
    // async function showFavs() {
    //     // console.log('showTop');
    //     if (getToken() == false) {
    //         return;
    //     }
    //     let res = await get_favs();
    //     console.log(res);
    //     if (!res.hasOwnProperty('story_list')) {
    //         return;
    //     }
    //     let story_list = res['story_list'];
    //     if (story_list.length > 0) {
    //       document.getElementById('favs_tab').innerHTML = await story_list_to_cards(story_list);
    //     }
    // }
        showTop();
        showFavs();
        showEdits();

    async function reload_page_usr_info() {
        showTop();
        showFavs();
        showEdits();
    }
</script>
<script src="src/vk_auth.js"></script>

</body>

</html>
